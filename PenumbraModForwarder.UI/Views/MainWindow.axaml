<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PenumbraModForwarder.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        d:DesignWidth="800"
        d:DesignHeight="600"
        x:Class="PenumbraModForwarder.UI.Views.MainWindow"
        x:CompileBindings="True"
        x:DataType="vm:MainWindowViewModel"
        Title="Penumbra Mod Forwarder"
        MinWidth="800"
        MinHeight="600"
        TransparencyLevelHint="AcrylicBlur"
        Background="{DynamicResource BackgroundBrush}"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid x:Name="Root" ColumnDefinitions="Auto,*">
        <!-- Left Menu Bar -->
        <ExperimentalAcrylicBorder Grid.Column="0" 
                                  Width="50" 
                                  Material="{DynamicResource TopBarAcrylicBrush}">
            <Grid RowDefinitions="Auto,*,Auto">
                <!-- Top Menu Items -->
                <StackPanel Grid.Row="0" Margin="0,32,0,0">
                    <Button Width="50" 
                            Height="50" 
                            HorizontalContentAlignment="Center" 
                            VerticalContentAlignment="Center" 
                            Background="Transparent" 
                            BorderThickness="0">
                        <Path Data="{StaticResource MenuIcon}" 
                              Fill="{DynamicResource TextBrush}" 
                              Width="20" 
                              Height="20"/>
                    </Button>
                    <Button Width="50" 
                            Height="50" 
                            HorizontalContentAlignment="Center" 
                            VerticalContentAlignment="Center" 
                            Background="Transparent" 
                            BorderThickness="0">
                        <Path Data="{StaticResource HomeIcon}" 
                              Fill="{DynamicResource TextBrush}" 
                              Width="20" 
                              Height="20"/>
                    </Button>
                </StackPanel>
                
                <!-- Bottom Menu Items -->
                <Button Grid.Row="2" 
                        Width="50" 
                        Height="50" 
                        Margin="0,0,0,10" 
                        HorizontalContentAlignment="Center" 
                        VerticalContentAlignment="Center" 
                        Background="Transparent" 
                        BorderThickness="0">
                    <Path Data="{StaticResource SettingsIcon}" 
                          Fill="{DynamicResource TextBrush}" 
                          Width="20" 
                          Height="20"/>
                </Button>
            </Grid>
        </ExperimentalAcrylicBorder>

        <!-- Main Content Area -->
        <Grid Grid.Column="1" RowDefinitions="Auto,*,Auto">
            <!-- Title Bar -->
            <Grid Grid.Row="0" 
                  Height="32" 
                  Background="Transparent" 
                  Name="TitleBar">
                <Grid ColumnDefinitions="*,Auto">
                    <Grid Grid.Column="0" Background="Transparent"/>
                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <!-- These are currently broken -->
                        <Button Width="46" 
                                Height="32" 
                                HorizontalContentAlignment="Center" 
                                VerticalContentAlignment="Center" 
                                Background="Transparent" 
                                BorderThickness="0" 
                                Command="{Binding MinimizeWindowCommand, Mode=OneWay}">
                            <Path Data="{StaticResource MinimizeIcon}" 
                                  Stroke="{DynamicResource TextBrush}" 
                                  StrokeThickness="1"/>
                        </Button>

                        <Button Width="46" 
                                Height="32" 
                                HorizontalContentAlignment="Center" 
                                VerticalContentAlignment="Center" 
                                Background="Transparent" 
                                BorderThickness="0" 
                                Command="{Binding CloseWindowCommand, Mode=OneWay}">
                            <Path Data="{StaticResource CloseIcon}" 
                                  Stroke="{DynamicResource TextBrush}" 
                                  StrokeThickness="1"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>

            <!-- Content Area -->
            <ContentControl Grid.Row="1" 
                          Margin="20,10,20,20" 
                          Content="{Binding CurrentPage}"/>

            <!-- Status Bar -->
            <ExperimentalAcrylicBorder Grid.Row="2" 
                                      Height="60" 
                                      Material="{DynamicResource StatusBarAcrylicBrush}">
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Grid.Column="0" 
                              Orientation="Horizontal" 
                              Margin="10,0" 
                              VerticalAlignment="Center">
                        <Path Data="{StaticResource InfoIcon}" 
                              Fill="{DynamicResource TextBrush}" 
                              Width="16" 
                              Height="16"/>
                        <TextBlock Text="Ready" 
                                 Margin="10,0" 
                                 Foreground="{DynamicResource TextBrush}"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" 
                              Orientation="Vertical" 
                              Margin="10,8" 
                              Width="300">
                        <TextBlock Text="Installing Penumbra Mod..." 
                                 Foreground="{DynamicResource TextBrush}" 
                                 HorizontalAlignment="Left" 
                                 Margin="0,0,0,4"/>
                        <Grid ColumnDefinitions="*,Auto">
                            <ProgressBar Grid.Column="0" 
                                       Height="4" 
                                       Margin="0,0,10,0" 
                                       Background="{DynamicResource PrimaryBrush}" 
                                       Foreground="{DynamicResource AccentBrush}"/>
                            <TextBlock Grid.Column="1" 
                                     Text="0%" 
                                     Foreground="{DynamicResource TextBrush}" 
                                     Width="40"/>
                        </Grid>
                    </StackPanel>
                </Grid>
            </ExperimentalAcrylicBorder>
        </Grid>
    </Grid>
</Window>